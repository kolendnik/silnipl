{% extends 'base.html.twig' %}

{% block title %}banList{% endblock %}

{% block body %} 

<h2>Zbanowani ({{ bans|length }}): </h2>

<table border>
<th>User</th>
<th>Banujący</th>
<th>Akcja</th>
{% for ban in bans %}
	<!--<div> {{ ban.name }} <button id="{{ban.id}}" class="ban-delete">Usuń</button>  </div>	-->
	<tr>
		<td>{{ban.name}}</td>
		<td>{{ban.addedBy}}</td>
		<td><button id="{{ban.id}}" class="ban-delete">Usuń</button></td>
	</tr>
{% endfor %}
</table>


{% block javascripts %}
{{ parent() }}
<script>
$(document).on('click', '.ban-delete',function(e){
	e.preventDefault();



    var id = $(this).attr('id');


fetch("http://localhost:8000/bans/delete/"+id,{
        method: "delete",
    })
    .then(resp => {
        if(resp.ok)
		{
			$(this).closest( "tr" ).hide(500);
			console.log('jest OK');
		}
		else
		{
			console.log('NOPE');
		}
    })

e.stopImmediatePropagation();
});

</script>
{% endblock %}

 {% endblock %}
